# Decimal Type

Реализация собственной библиотеки es_decimal.h. 

## Decimal

Тип Decimal представляет десятичные числа в диапазоне от положительных 79,228,162,514,264,337,593,543,950,335 до отрицательных 79,228,162,514,264,337,593,543,950,335. Значение Decimal по умолчанию равно 0. Decimal подходит для финансовых расчетов, которые требуют большого количества значимых целых и дробных цифр и отсутствия ошибок округления. Этот тип не устраняет необходимость округления. Скорее, сводит к минимуму количество ошибок из-за округления.

Когда результат деления и умножения передается методу округления, результат не страдает от потери точности.

### Арифметические операторы

| Название оператора | Оператор  | Функция                                                                            | 
| ------ | ------ |------------------------------------------------------------------------------------|
| Сложение | + | int es_add(es_decimal value_1, es_decimal value_2, es_decimal *result)         |
| Вычитание | - | int es_sub(es_decimal value_1, es_decimal value_2, es_decimal *result)         |
| Умножение | * | int es_mul(es_decimal value_1, es_decimal value_2, es_decimal *result) | 
| Деление | / | int es_div(es_decimal value_1, es_decimal value_2, es_decimal *result) |

Функции возвращают код ошибки:  
- 0 - OK  
- 1 - число слишком велико или равно бесконечности
- 2 - число слишком мало или равно отрицательной бесконечности
- 3 - деление на 0

*Уточнение про числа, не вмещающиеся в мантиссу:*
- *При получении чисел, не вмещающихся в мантиссу при арифметических операциях, используется банковское округление (например, 79,228,162,514,264,337,593,543,950,335 - 0.6 = 79,228,162,514,264,337,593,543,950,334)*


### Операторы сравнение

| Название оператора | Оператор  | Функция | 
| ------ | ------ | ------ |
| Меньше  | < | int es_is_less(es_decimal, es_decimal) |
| Меньше или равно | <= | int es_is_less_or_equal(es_decimal, es_decimal) | 
| Больше | \> |  int es_is_greater(es_decimal, es_decimal) |
| Больше или равно | \>= | int es_is_greater_or_equal(es_decimal, es_decimal) | 
| Равно | == |  int es_is_equal(es_decimal, es_decimal) |
| Не равно | != |  int es_is_not_equal(es_decimal, es_decimal) |

Возвращаемое значение:
- 0 - FALSE
- 1 - TRUE

### Преобразователи 

| Преобразователь | Функция | 
| ------ | ------ |
| Из int | int es_from_int_to_decimal(int src, es_decimal *dst) |
| Из float  | int es_from_float_to_decimal(float src, es_decimal *dst) |
| В int  | int es_from_decimal_to_int(es_decimal src, int *dst) |
| В float  | int es_from_decimal_to_float(es_decimal src, float *dst) |

Возвращаемое значение - код ошибки:
 - 0 - OK
 - 1 - ошибка конвертации

*Уточнение про преобразование числа типа float:*
- *Если числа слишком малы (0 < |x| < 1e-28), возвращается ошибка и значение, равное 0*
- *Если числа слишком велики (|x| > 79,228,162,514,264,337,593,543,950,335) или равны бесконечности, возвращается ошибка*
- *При обработке числа с типом float преобразовываются все содержащиеся в нём значимые десятичные цифры. Если таких цифр больше 7, то значение числа округляется к ближайшему, у которого не больше 7 значимых цифр.*

*Уточнение про преобразование из числа типа decimal в тип int:*
- *Если в числе типа decimal есть дробная часть, то она отбрасывается (например, 0.9 преобразуется 0)*


### Другие функции

| Описание | Функция                                                  | 
| ------ |----------------------------------------------------------|
| Округляет указанное Decimal число до ближайшего целого числа в сторону отрицательной бесконечности. | int es_floor(es_decimal value, es_decimal *result)    |	
| Округляет Decimal до ближайшего целого числа. | int es_round(es_decimal value, es_decimal *result)    |
| Возвращает целые цифры указанного Decimal числа; любые дробные цифры отбрасываются, включая конечные нули. | int es_truncate(es_decimal value, es_decimal *result) |
| Возвращает результат умножения указанного Decimal на -1. | int es_negate(es_decimal value, es_decimal *result)   |

Возвращаемое значение - код ошибки:
 - 0 - OK
 - 1 - ошибка вычисления
